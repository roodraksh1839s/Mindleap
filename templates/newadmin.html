<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MindEase - Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  <style>
    /* Custom Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .animate-fade-in-up {
      animation: fadeInUp 0.6s ease-out forwards;
    }

    .animate-pulse-soft {
      animation: pulse 2s ease-in-out infinite;
    }

    /* Modern Glassmorphism */
    .glass-card {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 8px 32px 0 rgba(167, 139, 250, 0.1);
    }

    .glass-nav {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(167, 139, 250, 0.2);
    }

    /* Interactive Elements */
    .stat-card {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(167, 139, 250, 0.2);
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 40px rgba(167, 139, 250, 0.3);
    }

    /* Sidebar Styles */
    .sidebar-item {
      transition: all 0.3s ease;
    }

    .sidebar-item:hover {
      background: rgba(167, 139, 250, 0.1);
      transform: translateX(5px);
    }

    .sidebar-item.active {
      background: rgba(167, 139, 250, 0.2);
      border-left: 4px solid #667eea;
    }

    /* Chart containers */
    .chart-container {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 24px;
      border: 1px solid rgba(167, 139, 250, 0.1);
      box-shadow: 0 4px 20px rgba(167, 139, 250, 0.1);
    }

    /* Alert Styles */
    .alert-high { border-left: 4px solid #ef4444; }
    .alert-medium { border-left: 4px solid #f59e0b; }
    .alert-low { border-left: 4px solid #10b981; }

    /* Ensure charts are visible */
    canvas {
      max-height: 300px !important;
      width: 100% !important;
    }

    /* Mobile Optimizations */
    @media (max-width: 768px) {
      .sidebar-collapsed {
        transform: translateX(-100%);
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-purple-50 via-pink-50 to-indigo-50 min-h-screen">

  <!-- Navigation Header -->
  <nav class="glass-nav sticky top-0 z-50 px-6 py-4">
    <div class="flex justify-between items-center">
      <!-- Left Section -->
      <div class="flex items-center space-x-4">
        <button id="sidebarToggle" class="p-2 rounded-xl hover:bg-purple-100 transition-colors">
          <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
        <div class="flex items-center space-x-3">
          <div class="text-2xl">üß†</div>
          <h1 class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">
            MindEase Admin
          </h1>
        </div>
      </div>

      <!-- Right Section -->
      <div class="flex items-center space-x-4">
        <button class="p-2 rounded-xl hover:bg-purple-100 transition-colors relative">
          <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5-5 5-5v10z"/>
          </svg>
          <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">3</span>
        </button>
        
        <div class="flex items-center space-x-3">
          <div class="text-right">
           <a href="{{ url_for('home') }}"><button>Log out</button></a>

            <div class="text-sm text-gray-500">Admin</div>
            <div class="font-semibold text-gray-800">Dr. Meera Shah</div>
          </div>
          <div class="w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold">
            MS
          </div>
        </div>
      </div>
    </div>
  </nav>

  <div class="flex">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 min-h-screen glass-card border-r border-purple-200 transition-all duration-300">
      <div class="p-6">
        <nav class="space-y-2">
          <div class="sidebar-item active flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üëÅÔ∏è</div>
            <span class="font-medium">Overview</span>
          </div>
          
          <div class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üë•</div>
            <span class="font-medium">Students</span>
          </div>
          
           <!-- <div class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üìã</div>
            <span class="font-medium">Screenings</span>
          </div>
          
          <div class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üí¨</div>
            <span class="font-medium">AI Chatbot</span>
          </div> -->
          
          <div  id="addResourcesBtn"  class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üìã</div>
            <span class="font-medium">Add Learning Resources</span>
          </div>
          
          <div class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üìÖ</div>
            <span class="font-medium">Appointments</span>
          </div>
          
          <div class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">üìö</div>
            <span class="font-medium">Resources</span>
          </div>
          
          <div class="sidebar-item flex items-center space-x-3 p-3 rounded-xl cursor-pointer">
            <div class="text-2xl">‚ö†Ô∏è</div>
            <span class="font-medium">Crisis Alerts</span>
          </div>
        </nav>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6">
      <!-- Statistics Cards -->
      <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="stat-card p-6 rounded-2xl">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm font-medium">Active Users</p>
              <p class="text-3xl font-bold text-gray-800 mt-1">1,248</p>
              <p class="text-green-600 text-sm font-medium mt-1">‚Üó +3.2% from last week</p>
            </div>
            <div class="text-4xl animate-pulse-soft">üë•</div>
          </div>
        </div>

        <div class="stat-card p-6 rounded-2xl">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm font-medium">Screenings</p>
              <p class="text-3xl font-bold text-gray-800 mt-1">842</p>
              <p class="text-green-600 text-sm font-medium mt-1">‚Üó +5.1% from last week</p>
            </div>
            <div class="text-4xl animate-pulse-soft">üìä</div>
          </div>
        </div>

        <div class="stat-card p-6 rounded-2xl">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm font-medium">Appointments</p>
              <p class="text-3xl font-bold text-gray-800 mt-1">178</p>
              <p class="text-red-600 text-sm font-medium mt-1">‚Üò -1.8% from last week</p>
            </div>
            <div class="text-4xl animate-pulse-soft">üìÖ</div>
          </div>
        </div>

        <div class="stat-card p-6 rounded-2xl">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-gray-500 text-sm font-medium">AI Interactions</p>
              <p class="text-3xl font-bold text-gray-800 mt-1">5,230</p>
              <p class="text-green-600 text-sm font-medium mt-1">‚Üó +7.6% from last week</p>
            </div>
            <div class="text-4xl animate-pulse-soft">ü§ñ</div>
          </div>
        </div>
      </section>

      <!-- Charts Section -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <!-- Stress Trends Chart -->
        <div class="lg:col-span-2 chart-container">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold text-gray-800">Mental Health Trends</h3>
            <select class="px-3 py-1 rounded-lg border border-purple-200 text-sm">
              <option>Last 30 Days</option>
              <option>Last 7 Days</option>
              <option>Last 3 Months</option>
            </select>
          </div>
          <div style="height: 300px; position: relative;">
            <canvas id="trendsChart"></canvas>
          </div>
        </div>

        <!-- Risk Distribution -->
        <div class="chart-container">
          <h3 class="text-xl font-bold text-gray-800 mb-6">Risk Distribution</h3>
          <div style="height: 250px; position: relative;">
            <canvas id="riskChart"></canvas>
          </div>
          <div class="mt-6 space-y-3">
            <div class="flex items-center justify-between text-sm">
              <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                <span>Low Risk</span>
              </div>
              <span class="font-semibold">62%</span>
            </div>
            <div class="flex items-center justify-between text-sm">
              <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-yellow-400 rounded-full"></div>
                <span>Moderate Risk</span>
              </div>
              <span class="font-semibold">28%</span>
            </div>
            <div class="flex items-center justify-between text-sm">
              <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-red-400 rounded-full"></div>
                <span>High Risk</span>
              </div>
              <span class="font-semibold">10%</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Additional Analytics -->
      <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Resource Usage -->
        <div class="chart-container">
          <h3 class="text-xl font-bold text-gray-800 mb-6">Resource Hub Usage</h3>
          <div style="height: 250px; position: relative;">
            <canvas id="resourceChart"></canvas>
          </div>
        </div>

        <!-- Chatbot Analytics -->
        <div class="chart-container">
          <h3 class="text-xl font-bold text-gray-800 mb-6">AI Chatbot Performance</h3>
          <div style="height: 200px; position: relative;">
            <canvas id="chatbotChart"></canvas>
          </div>
          <div class="mt-4 space-y-2 text-sm">
            <div class="flex justify-between">
              <span class="text-gray-600">Resolution Rate:</span>
              <span class="font-semibold text-green-600">86%</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Avg Response Time:</span>
              <span class="font-semibold">2.3s</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Escalations:</span>
              <span class="font-semibold text-orange-600">18%</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Alerts and Community -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <!-- Crisis Alerts -->
        <div class="stat-card p-6 rounded-2xl">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-800">Crisis Alerts</h3>
            <span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">3 Active</span>
          </div>
          <div class="space-y-3">
            <div class="p-3 bg-red-50 rounded-lg alert-high">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-gray-800">Sanya P.</p>
                  <p class="text-sm text-gray-600">High anxiety scores detected</p>
                </div>
                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">Contacted</span>
              </div>
            </div>
            <div class="p-3 bg-yellow-50 rounded-lg alert-medium">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-gray-800">Arjun B.</p>
                  <p class="text-sm text-gray-600">Multiple missed appointments</p>
                </div>
                <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">Pending</span>
              </div>
            </div>
            <div class="p-3 bg-red-50 rounded-lg alert-high">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-gray-800">Lina M.</p>
                  <p class="text-sm text-gray-600">Crisis intervention needed</p>
                </div>
                <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">Escalated</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Peer Support Stats -->
        <div class="stat-card p-6 rounded-2xl">
          <h3 class="text-xl font-bold text-gray-800 mb-4">Community Engagement</h3>
          <div class="space-y-4">
            <div class="flex items-center justify-between">
              <span class="text-gray-600">Active Posts:</span>
              <span class="font-bold text-2xl text-purple-600">278</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-gray-600">Replies:</span>
              <span class="font-bold text-2xl text-indigo-600">1,102</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-gray-600">Participants:</span>
              <span class="font-bold text-2xl text-pink-600">94</span>
            </div>
            <div class="mt-4">
              <p class="text-sm text-gray-600 mb-2">Sentiment Analysis:</p>
              <div class="space-y-1">
                <div class="flex items-center space-x-2">
                  <div class="w-3 h-3 bg-green-400 rounded-full"></div>
                  <span class="text-sm">Positive: 68%</span>
                </div>
                <div class="flex items-center space-x-2">
                  <div class="w-3 h-3 bg-yellow-400 rounded-full"></div>
                  <span class="text-sm">Neutral: 22%</span>
                </div>
                <div class="flex items-center space-x-2">
                  <div class="w-3 h-3 bg-red-400 rounded-full"></div>
                  <span class="text-sm">Negative: 10%</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Appointments Today -->
        <div class="stat-card p-6 rounded-2xl">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-xl font-bold text-gray-800">Today's Sessions</h3>
            <button class="text-purple-600 hover:text-purple-700 text-sm font-medium">View All</button>
          </div>
          <div class="space-y-3">
            <div class="p-3 bg-blue-50 rounded-lg">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-gray-800">Aisha R.</p>
                  <p class="text-sm text-gray-600">Dr. Mehta - 10:00 AM</p>
                </div>
                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Confirmed</span>
              </div>
            </div>
            <div class="p-3 bg-green-50 rounded-lg">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-gray-800">Rohit K.</p>
                  <p class="text-sm text-gray-600">Ms. Singh - 2:00 PM</p>
                </div>
                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">In Progress</span>
              </div>
            </div>
            <div class="p-3 bg-purple-50 rounded-lg">
              <div class="flex items-center justify-between">
                <div>
                  <p class="font-semibold text-gray-800">Priya N.</p>
                  <p class="text-sm text-gray-600">Dr. Gupta - 4:30 PM</p>
                </div>
                <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full">Scheduled</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Footer -->
  <footer class="bg-gradient-to-r from-purple-100 to-pink-100 text-center py-6 mt-12">
    <div class="text-gray-700">
      <p class="font-medium">¬© 2025 MindEase Analytics ‚Ä¢ Designed for calm, clarity, and action</p>
      <p class="text-sm text-gray-500 mt-1">Empowering mental health through intelligent insights</p>
    </div>
  </footer>

  <script>
    // Wait for DOM to load
    document.addEventListener('DOMContentLoaded', function() {
      
      // Sidebar Toggle
      document.getElementById('sidebarToggle').addEventListener('click', () => {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('w-64');
        sidebar.classList.toggle('w-16');
      });

      // Charts Implementation with Chart.js v4
      
      // 1. Mental Health Trends Line Chart
      const trendsCtx = document.getElementById('trendsChart').getContext('2d');
      new Chart(trendsCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'],
          datasets: [
            {
              label: 'Stress',
              data: [42, 45, 39, 48, 51, 47, 44, 46],
              borderColor: '#8B5CF6',
              backgroundColor: 'rgba(139, 92, 246, 0.1)',
              fill: true,
              tension: 0.4,
              pointBackgroundColor: '#8B5CF6',
              pointBorderColor: '#ffffff',
              pointBorderWidth: 2,
              pointRadius: 4
            },
            {
              label: 'Anxiety',
              data: [38, 41, 36, 44, 49, 43, 40, 42],
              borderColor: '#EC4899',
              backgroundColor: 'rgba(236, 72, 153, 0.1)',
              fill: true,
              tension: 0.4,
              pointBackgroundColor: '#EC4899',
              pointBorderColor: '#ffffff',
              pointBorderWidth: 2,
              pointRadius: 4
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                usePointStyle: true,
                padding: 15,
                font: {
                  size: 12,
                  weight: 500
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(167, 139, 250, 0.1)'
              }
            },
            x: {
              grid: {
                color: 'rgba(167, 139, 250, 0.1)'
              }
            }
          }
        }
      });

      // 2. Risk Distribution Doughnut Chart
      const riskCtx = document.getElementById('riskChart').getContext('2d');
      new Chart(riskCtx, {
        type: 'doughnut',
        data: {
          labels: ['Low', 'Moderate', 'High'],
          datasets: [{
            data: [62, 28, 10],
            backgroundColor: [
              '#10B981',
              '#F59E0B', 
              '#EF4444'
            ],
            borderColor: ['#ffffff', '#ffffff', '#ffffff'],
            borderWidth: 3,
            hoverOffset: 8
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          cutout: '60%'
        }
      });

      // 3. Resource Usage Horizontal Bar Chart
      const resourceCtx = document.getElementById('resourceChart').getContext('2d');
      new Chart(resourceCtx, {
        type: 'bar',
        data: {
          labels: ['CBT Guides', 'Mindfulness', 'Self-Help Videos', 'Crisis Contacts'],
          datasets: [{
            label: 'Uses',
            data: [432, 387, 298, 154],
            backgroundColor: ['#8B5CF6', '#EC4899', '#F59E0B', '#EF4444'],
            borderRadius: 8
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          indexAxis: 'y',
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            x: {
              beginAtZero: true,
              grid: {
                color: 'rgba(167, 139, 250, 0.1)'
              }
            },
            y: {
              grid: {
                display: false
              }
            }
          }
        }
      });

      // 4. Chatbot Performance Bar Chart
      const chatbotCtx = document.getElementById('chatbotChart').getContext('2d');
      new Chart(chatbotCtx, {
        type: 'bar',
        data: {
          labels: ['Resolved', 'Escalations'],
          datasets: [{
            label: 'Count',
            data: [4300, 930],
            backgroundColor: ['#10B981', '#EF4444'],
            borderRadius: 12
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(167, 139, 250, 0.1)'
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });

      // Interactive sidebar items
      document.querySelectorAll('.sidebar-item').forEach(item => {
        item.addEventListener('click', function() {
          document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
          this.classList.add('active');
        });
      });
    });
  </script>


<!-- Upload Modal -->
<div id="uploadModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl p-8 w-96 shadow-xl">
    <h2 class="text-xl font-bold mb-4 text-gray-800">Upload Learning Resources</h2>
    <form id="uploadForm">
      <input type="file" id="resourceFile" class="mb-4 w-full border rounded p-2" />
      <div class="flex justify-end space-x-3">
        <button type="button" id="closeModal" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">Cancel</button>
        <button type="submit" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">Upload</button>
      </div>
    </form>
  </div>
</div>

<script>
  const addResourcesBtn = document.getElementById('addResourcesBtn');
const uploadModal = document.getElementById('uploadModal');
const closeModal = document.getElementById('closeModal');
const uploadForm = document.getElementById('uploadForm');

addResourcesBtn.addEventListener('click', () => {
  uploadModal.classList.remove('hidden');
  uploadModal.classList.add('flex');   // show modal as flex
});

closeModal.addEventListener('click', () => {
  uploadModal.classList.add('hidden');
  uploadModal.classList.remove('flex');
});

uploadForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const file = document.getElementById('resourceFile').files[0];
  if (file) {
    alert(`File selected: ${file.name}`);
    // üëâ here you can send it to your backend with fetch or AJAX
  }
  uploadModal.classList.add('hidden');
  uploadModal.classList.remove('flex');
});
</script>
</body>
</html>